get-spwebapplication | get-spsite -limit All| Select -First 2 | get-spweb -piplinevariable web |   foreach{
    $webAssignment = start-spassignment

    $users="Domain\User1","Domain\User2","Domain\User3"
    $regex = ".*($($users -Join "|")).*"

    write-Host "Processing $($web.Url)"
    $web | get-spuser -limit All -piplinevarable User| foreach{

    if($user -notmatch $regex){

        write-host "Removing User $($user.UserLogin)"
        $web | remove-spuser $user


} else {
        Write-Host "Skipping User $user"
        } #closing Else
    } #Closing Users
    $_.dispose();
    $webAssignment | stop-spassignment
}
